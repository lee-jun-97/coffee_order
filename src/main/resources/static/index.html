<!DOCTYPE html>
<html lang="ko">
<head>
	<title>Main</title>
	<meta charset="utf-8"/>
</head>
<body>
	<h1 align="center">Menu</h1>
	<h2 align="center">Coffee Order System</h2>
	<div align="center">
		<img src="/img/Americano.jpg" width="100px"/>
		<p>4500원</p>
	</div>
	<section align="center">
		<div>
			<input id="menu" name="menu" placeholder="메뉴 입력"/>
			<input id="itemcnt" name="cnt" placeholder="갯수 입력"/>
		</div>
	</section>
	<div>
		<p align="center"><button type="submit" id="payment-button">결제하기</button></p>
		<form method="GET" action="/search" align="center">
			<button type="submit" id="search-history">내역 조회</button> 
		</form>
	</div>
	<script src="https://js.tosspayments.com/v1"></script>
	<script>
	
	    var tossPayments = TossPayments("test_ck_JQbgMGZzorzzXdypGB7rl5E1em4d");
	    var button = document.getElementById("payment-button");
	    
	    var orderId = new Date().getTime();
	
	    button.addEventListener("click", function () {
		
			var cnt = document.getElementById("itemcnt").value;
			var cost = parseInt(cnt)*4500;
		    var menu = document.getElementById("menu").value;
			
	        var method = "가상계좌"; // "카드" 혹은 "가상계좌"
	
	        var paymentData = {
	            amount: cost,
	            orderId: orderId,
	            orderName: menu,
	            customerName: "이 준",
	            successUrl: window.location.origin + "/success",
	            failUrl: window.location.origin + "/fail",
	        };
	
	        tossPayments.requestPayment(method, paymentData);
	    });
	</script>
</body>